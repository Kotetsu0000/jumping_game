# GitHub Copilot instructions

## ユーザーの使用する指示

ユーザーからの指示は、以下のように記述されます。

-   `issue` で始まる場合は、GitHub の issue を参照し、現在のコードと比較を行って、終了していない項目を列挙します。
    -   `issue [番号 or タイトル]` となっている場合は、番号やタイトルを指定して issue を参照します。
    -   `issue` の後に何も続かない場合は、現在のブランチに関連する issue を参照します。`main` ブランチにいる場合は、開発の順番で次の issue を探し、その issue を参照します。もし、開発段階が進んでおり、バグの修正や機能追加が必要な場合は、優先度の高い issue を選択します。
    -   issue の内容に終了していない項目があるのに、その issue に対応するブランチがない場合は、ブランチも作成します。その際は以下の`ブランチ戦略`に従ってブランチ名を決定します。また、`./memory/issue_番号.md` のようなファイルを作成し、issue の内容、終了していない項目、現在のブランチ名、現在の状況を記録します。
-   `進めて`で始まる場合は、`./memory/issue_番号.md` の内容から、最も優先度の高いタスクを選び、そのタスクを遂行します。
    -   タスクを遂行する際は、以下の手順に従います。
        1.  `./memory/issue_番号.md` の内容を確認し、タスクを選択します。既にタスクが選択されている場合は、そのタスクを遂行します。タスクを選択した場合は、選択したタスクを `./memory/issue_番号.md` に記録します。
        2.  タスクに対応するコードを実装します。実装が完了したら、コードをコミットし、適切なコミットメッセージを付けます。
        3.  定期的に現在の状況を記録します。`./memory/issue_番号.md` に、現在のブランチ名、現在の状況を記録します。懸念事項がある場合は、それも記録します。
        4.  コードの実装が完了したら、以下の条件によって、ユーザーに確認を行います。
            -   全てのタスクが完了した場合は、その旨をユーザーに伝え、問題がなければプルリクエストを作成するように指示します。
            -   タスクが完了していない場合は、ユーザーに確認を行い、次のタスクを選択するように指示します。
-   `プルリクエスト`で始まる場合は、プルリクエストを作成し、レビューを受けます。
    -   プルリクエストの作成時には、以下の情報を含めます。
        -   プルリクエストのタイトル
        -   プルリクエストの説明
        -   関連する issue の番号
        -   変更内容の概要
    -   プルリクエストのコメントの始めと終わりは`<!-- I want to review in Japanese. -->`で囲みます。これにより、レビューの際に日本語でのコメントを促します。
    -   `./memory/issue_番号.md` の内容を更新し、プルリクエストのリンク、内容、現在のブランチ名、現在の状況を記録します。
    -   プルリクエストが既に`./memory/issue_番号.md` に記載されている場合は、そのプルリクエストの最新のコメントを取得し、`./memory/issue_番号.md` に追記します。その後、そのコメントに対して対応、返答を行います。
    -   なお、メッセージを送信する際は文字列をエスケープする必要はありません。しないように注意してください。

## ブランチ戦略

-   ブランチ名は `feature/issue番号` の形式で命名します。
-   既に存在するブランチがある場合は、そのブランチを使用します。
-   `main` ブランチは常に最新の状態を保ち、安定したコードを保持します。
-   `main` ブランチから新しいブランチを作成し、開発を行います。
-   開発が完了したら、ユーザーに確認を行います。
-   ユーザーの指示を受けたらプルリクエストを作成し、レビューを受けます。
-   レビューが完了したら、プルリクエストをユーザーがマージし、`main` ブランチに合流します。
-   プルリクエストのマージが完了したら、現在のブランチ、作成されている `./memory/issue_番号.md` を削除し、対応する issue を Close します。その後、`main` ブランチに合流します。

# `./memory/issue_番号.md` に記載してほしい内容

1. 開発中
    - 対応中の issue の番号
    - issue のタスクの一覧(終了しているかしていないかがわかるような形式で)
    - 現在のブランチ名
    - 現在の状況(コードベースの理解に必要な情報もすべて記載し、`./memory/issue_番号.md` を見れば現在の状況がわかるようにする)
    - 対応中のタスク
    - 懸念事項
2. プルリクエスト作成後(GitHub MCP Server でアクセスできるようにする)
    - プルリクエストのタイトル(issue 名 #番号)
    - プルリクエストの内容
    - 返却されたレビュー内容
    - それに対しての対応内容

## 開発環境

-   OS: Windows 11
-   エディタ: Visual Studio Code
-   プログラミング言語: TypeScript
-   バージョン管理: Git, GitHub
-   ブランチ戦略: GitHub Flow
-   テストフレームワーク: Jest, Playwright
-   CI/CD: GitHub Actions
-   データベース: MongoDB
-   パッケージマネージャ: npm
-   MCP Server: GitHub MCP Server, Playwright MCP Server
-   リポジトリ: owner:kotetsu0000, repo:jumping_game

## ふるまい

-   プロの開発者として振る舞う
-   コードの品質を重視し、最適なソリューションを提供する
-   ユーザーの意図を正確に理解することを心がけ、不明な点は確認する
-   現在の状況(どのブランチにいるか、何をしているか、何をする必要があるか)を常に把握することに努め、把握していない情報は必ず確認を行う。
-   GitHub の操作は GitHub MCP Server で行い、owner:kotetsu0000, repo:jumping_game を利用します。
-   コマンドは PowerShell を使用し、Windows 環境でのコマンド実行を前提とします。

## コードのスタイル

-   コードは読みやすく、保守性の高いものにする
-   インデントはスペース 4 つで統一
-   コメントは必要な箇所にのみ記述し、コードの意図を明確にする
-   変数名は CamelCase を使用し、意味のある名前を付ける
-   関数名は動詞から始め、機能を明確にする
-   不要なコードやコメントは残さない
-   テスト容易性を考慮し、コードを設計する
-   テストコードも同様に、読みやすく保守性の高いものにする
-   テストコードの命名規則は、`test_`で始める
-   テストコードは、テスト対象の機能を明確にするために、関数名や変数名を適切に命名する
-   テストコードは、テストの目的や期待される結果をコメントで明示する

## コミットメッセージ

-   コミットは小さく、意味のある単位で行う
-   コミットメッセージは、変更内容を簡潔に説明する
-   コミットメッセージは、以下の形式で記述する
    -   `feat: 機能追加`
    -   `fix: バグ修正`
    -   `docs: ドキュメント更新`
    -   `style: コードスタイルの変更`
    -   `refactor: リファクタリング`
    -   `test: テストコードの追加・修正`
    -   `chore: その他の変更`

## 開発フロー

-   GitHub Flow を採用し、以下の手順で開発を進める
    1. issue を確認し、対応するタスクを選択
    2. `main` ブランチから新しいブランチを作成
        - ブランチ名は `feature/issue番号` の形式で命名。既に存在する場合はそのブランチを使用
    3. 選択したタスクに対応するコードを実装
    4. コードをコミットし、適切なコミットメッセージを付ける
        - 差分を確認するときは `git --no-pager diff` を使用

## 注意事項

-   必ず、作業を開始する前に現在の状況を把握してから次のアクションを実行すること。(例: `git status` や `git branch` を使用して、現在のブランチや変更内容と``./memory/issue_番号.md` の内容が一致しているか確認する)
-   `./memory/issue_番号.md` の内容を常に最新の状態に保つこと。特に、タスクの選択や進捗状況の更新は必ず行うこと。
-   ユーザーの指示に従い、適切なタイミングでプルリクエストの作成を提案し、レビューを受けること。
-   プルリクエストのレビューは、必ず日本語で行うこと。レビューの際は、`<!-- I want to review in Japanese. -->` で囲むこと。
-   コマンドを複数同時に実行する際は、`;`を使用してコマンドを区切ること。例えば、`git status; git branch` のように実行します。記載するコマンドが PowerShell であることを前提としています。
